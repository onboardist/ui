{"version":3,"file":"onboardist-ui.cjs.js","sources":["../node_modules/svelte/shared.js","../src/components/coachmark/ActionButton.svelte","../node_modules/performance-now/lib/performance-now.js","../node_modules/raf/index.js","../src/components/coachmark/Arrow.svelte","../src/components/NineSlice.svelte","../src/components/coachmark/Text.svelte","../src/components/coachmark/inject-svg.js","../src/events.js","../src/util.js","../src/methods.js","../src/components/Coachmark.svelte","../src/config.js","../src/components/Backdrop.svelte","../src/components/Hotspot.svelte","../src/components/Box.svelte","../src/components/Modal.svelte","../src/components/Tooltip.svelte","../src/components/index.js","../src/registry.js","../node_modules/svelte/store.js","../src/components/tour.js","../src/index.js"],"sourcesContent":["function noop() {}\n\nfunction assign(tar, src) {\n\tfor (var k in src) tar[k] = src[k];\n\treturn tar;\n}\n\nfunction assignTrue(tar, src) {\n\tfor (var k in src) tar[k] = 1;\n\treturn tar;\n}\n\nfunction isPromise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nfunction callAfter(fn, i) {\n\tif (i === 0) fn();\n\treturn () => {\n\t\tif (!--i) fn();\n\t};\n}\n\nfunction addLoc(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nfunction exclude(src, prop) {\n\tconst tar = {};\n\tfor (const k in src) k === prop || (tar[k] = src[k]);\n\treturn tar;\n}\n\nfunction run(fn) {\n\tfn();\n}\n\nfunction append(target, node) {\n\ttarget.appendChild(node);\n}\n\nfunction insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations, detach) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detach);\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n}\n\nfunction removeListener(node, event, handler, options) {\n\tnode.removeEventListener(event, handler, options);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse node.setAttribute(attribute, value);\n}\n\nfunction setAttributes(node, attributes) {\n\tfor (var key in attributes) {\n\t\tif (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key in node) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tsetAttribute(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\nfunction setCustomElementData(node, prop, value) {\n\tif (prop in node) {\n\t\tnode[prop] = value;\n\t} else {\n\t\tsetAttribute(node, prop, value);\n\t}\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setData(text, data) {\n\ttext.data = '' + data;\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction selectOption(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction selectOptions(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction selectValue(select) {\n\tvar selectedOption = select.querySelector(':checked') || select.options[0];\n\treturn selectedOption && selectedOption.__value;\n}\n\nfunction selectMultipleValue(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), function(option) {\n\t\treturn option.__value;\n\t});\n}\n\nfunction addResizeListener(element, fn) {\n\tif (getComputedStyle(element).position === 'static') {\n\t\telement.style.position = 'relative';\n\t}\n\n\tconst object = document.createElement('object');\n\tobject.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n\tobject.type = 'text/html';\n\n\tlet win;\n\n\tobject.onload = () => {\n\t\twin = object.contentDocument.defaultView;\n\t\twin.addEventListener('resize', fn);\n\t};\n\n\tif (/Trident/.test(navigator.userAgent)) {\n\t\telement.appendChild(object);\n\t\tobject.data = 'about:blank';\n\t} else {\n\t\tobject.data = 'about:blank';\n\t\telement.appendChild(object);\n\t}\n\n\treturn {\n\t\tcancel: () => {\n\t\t\twin && win.removeEventListener && win.removeEventListener('resize', fn);\n\t\t\telement.removeChild(object);\n\t\t}\n\t};\n}\n\nfunction toggleClass(element, name, toggle) {\n\telement.classList[toggle ? 'add' : 'remove'](name);\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule({ a, b, delta, duration }, ease, fn) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\n\treturn keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro) {\n\tlet obj = fn.call(component, node, params);\n\tlet duration;\n\tlet ease;\n\tlet cssText;\n\n\tlet initialised = false;\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\n\t\trun(b, callback) {\n\t\t\tif (typeof obj === 'function') {\n\t\t\t\ttransitionManager.wait().then(() => {\n\t\t\t\t\tobj = obj();\n\t\t\t\t\tthis._run(b, callback);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._run(b, callback);\n\t\t\t}\n\t\t},\n\n\t\t_run(b, callback) {\n\t\t\tduration = obj.duration || 300;\n\t\t\tease = obj.easing || linear;\n\n\t\t\tconst program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tb,\n\t\t\t\tcallback: callback || noop\n\t\t\t};\n\n\t\t\tif (intro && !initialised) {\n\t\t\t\tif (obj.css && obj.delay) {\n\t\t\t\t\tcssText = node.style.cssText;\n\t\t\t\t\tnode.style.cssText += obj.css(0, 1);\n\t\t\t\t}\n\n\t\t\t\tif (obj.tick) obj.tick(0, 1);\n\t\t\t\tinitialised = true;\n\t\t\t}\n\n\t\t\tif (!b) {\n\t\t\t\tprogram.group = outros.current;\n\t\t\t\toutros.current.remaining += 1;\n\t\t\t}\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\n\t\tstart(program) {\n\t\t\tcomponent.fire(`${program.b ? 'intro' : 'outro'}.start`, { node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tconst rule = generateRule(program, ease, obj.css);\n\t\t\t\ttransitionManager.addRule(rule, program.name = '__svelte_' + hash(rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))\n\t\t\t\t\t.concat(`${program.name} ${program.duration}ms linear 1 forwards`)\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\n\t\tupdate(now) {\n\t\t\tconst program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tconst p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t, 1 - this.t);\n\t\t},\n\n\t\tdone() {\n\t\t\tconst program = this.program;\n\t\t\tthis.t = program.b;\n\n\t\t\tif (obj.tick) obj.tick(this.t, 1 - this.t);\n\n\t\t\tcomponent.fire(`${program.b ? 'intro' : 'outro'}.end`, { node });\n\n\t\t\tif (!program.b && !program.invalidated) {\n\t\t\t\tprogram.group.callbacks.push(() => {\n\t\t\t\t\tprogram.callback();\n\t\t\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\t\t});\n\n\t\t\t\tif (--program.group.remaining === 0) {\n\t\t\t\t\tprogram.group.callbacks.forEach(run);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\t}\n\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\n\t\tabort(reset) {\n\t\t\tif (this.program) {\n\t\t\t\tif (reset && obj.tick) obj.tick(1, 0);\n\t\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\t\tthis.program = this.pending = null;\n\t\t\t\tthis.running = false;\n\t\t\t}\n\t\t},\n\n\t\tinvalidate() {\n\t\t\tif (this.program) {\n\t\t\t\tthis.program.invalidated = true;\n\t\t\t}\n\t\t}\n\t};\n}\n\nlet outros = {};\n\nfunction groupOutros() {\n\toutros.current = {\n\t\tremaining: 0,\n\t\tcallbacks: []\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\tpromise: null,\n\n\tadd(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule(rule, name) {\n\t\tif (!this.stylesheet) {\n\t\t\tconst style = createElement('style');\n\t\t\tdocument.head.appendChild(style);\n\t\t\ttransitionManager.stylesheet = style.sheet;\n\t\t}\n\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule(`@keyframes ${name} ${rule}`, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext() {\n\t\tthis.running = false;\n\n\t\tconst now = window.performance.now();\n\t\tlet i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tconst transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tlet i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(anim => anim && anim.indexOf(name) === -1)\n\t\t\t.join(', ');\n\t},\n\n\twait() {\n\t\tif (!transitionManager.promise) {\n\t\t\ttransitionManager.promise = Promise.resolve();\n\t\t\ttransitionManager.promise.then(() => {\n\t\t\t\ttransitionManager.promise = null;\n\t\t\t});\n\t\t}\n\n\t\treturn transitionManager.promise;\n\t}\n};\n\nfunction wrapAnimation(node, from, fn, params) {\n\tif (!from) return;\n\n\tconst to = node.getBoundingClientRect();\n\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) return;\n\n\tconst info = fn(node, { from, to }, params);\n\n\tconst duration = 'duration' in info ? info.duration : 300;\n\tconst delay = 'delay' in info ? info.delay : 0;\n\tconst ease = info.easing || linear;\n\tconst start = window.performance.now() + delay;\n\tconst end = start + duration;\n\n\tconst program = {\n\t\ta: 0,\n\t\tt: 0,\n\t\tb: 1,\n\t\tdelta: 1,\n\t\tduration,\n\t\tstart,\n\t\tend\n\t};\n\n\tconst cssText = node.style.cssText;\n\n\tconst animation = {\n\t\tpending: delay ? program : null,\n\t\tprogram: delay ? null : program,\n\t\trunning: true,\n\n\t\tstart() {\n\t\t\tif (info.css) {\n\t\t\t\tif (delay) node.style.cssText = cssText;\n\n\t\t\t\tconst rule = generateRule(program, ease, info.css);\n\t\t\t\tprogram.name = `__svelte_${hash(rule)}`;\n\n\t\t\t\ttransitionManager.addRule(rule, program.name);\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))\n\t\t\t\t\t.concat(`${program.name} ${program.duration}ms linear 1 forwards`)\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tanimation.program = program;\n\t\t\tanimation.pending = null;\n\t\t},\n\n\t\tupdate: now => {\n\t\t\tconst p = now - program.start;\n\t\t\tconst t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (info.tick) info.tick(t, 1 - t);\n\t\t},\n\n\t\tdone() {\n\t\t\tif (info.tick) info.tick(1, 0);\n\t\t\tanimation.stop();\n\t\t},\n\n\t\tstop() {\n\t\t\tif (info.css) transitionManager.deleteRule(node, program.name);\n\t\t\tanimation.running = false;\n\t\t}\n\t};\n\n\ttransitionManager.add(animation);\n\n\tif (info.tick) info.tick(0, 1);\n\n\tif (delay) {\n\t\tif (info.css) node.style.cssText += info.css(0, 1);\n\t} else {\n\t\tanimation.start();\n\t}\n\n\treturn animation;\n}\n\nfunction fixPosition(node) {\n\tconst style = getComputedStyle(node);\n\n\tif (style.position !== 'absolute' && style.position !== 'fixed') {\n\t\tconst { width, height } = style;\n\t\tconst a = node.getBoundingClientRect();\n\t\tnode.style.position = 'absolute';\n\t\tnode.style.width = width;\n\t\tnode.style.height = height;\n\t\tconst b = node.getBoundingClientRect();\n\n\t\tif (a.left !== b.left || a.top !== b.top) {\n\t\t\tconst style = getComputedStyle(node);\n\t\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\n\t\t\tnode.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n\t\t}\n\t}\n}\n\nfunction handlePromise(promise, info) {\n\tvar token = info.token = {};\n\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\n\t\tinfo.resolved = key && { [key]: value };\n\n\t\tconst child_ctx = assign(assign({}, info.ctx), info.resolved);\n\t\tconst block = type && (info.current = type)(info.component, child_ctx);\n\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroupOutros();\n\t\t\t\t\t\tblock.o(() => {\n\t\t\t\t\t\t\tblock.d(1);\n\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\n\t\t\tblock.c();\n\t\t\tblock[block.i ? 'i' : 'm'](info.mount(), info.anchor);\n\n\t\t\tinfo.component.root.set({}); // flush any handlers that were created\n\t\t}\n\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t}\n\n\tif (isPromise(promise)) {\n\t\tpromise.then(value => {\n\t\t\tupdate(info.then, 1, info.value, value);\n\t\t}, error => {\n\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t});\n\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\n\t\tinfo.resolved = { [info.value]: promise };\n\t}\n}\n\nfunction destroyBlock(block, lookup) {\n\tblock.d(1);\n\tlookup[block.key] = null;\n}\n\nfunction outroAndDestroyBlock(block, lookup) {\n\tblock.o(function() {\n\t\tdestroyBlock(block, lookup);\n\t});\n}\n\nfunction fixAndOutroAndDestroyBlock(block, lookup) {\n\tblock.f();\n\toutroAndDestroyBlock(block, lookup);\n}\n\nfunction updateKeyedEach(old_blocks, component, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, intro_method, next, get_context) {\n\tvar o = old_blocks.length;\n\tvar n = list.length;\n\n\tvar i = o;\n\tvar old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\n\tvar new_blocks = [];\n\tvar new_lookup = {};\n\tvar deltas = {};\n\n\tvar i = n;\n\twhile (i--) {\n\t\tvar child_ctx = get_context(ctx, list, i);\n\t\tvar key = get_key(child_ctx);\n\t\tvar block = lookup[key];\n\n\t\tif (!block) {\n\t\t\tblock = create_each_block(component, key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\tblock.p(changed, child_ctx);\n\t\t}\n\n\t\tnew_blocks[i] = new_lookup[key] = block;\n\n\t\tif (key in old_indexes) deltas[key] = Math.abs(i - old_indexes[key]);\n\t}\n\n\tvar will_move = {};\n\tvar did_move = {};\n\n\tfunction insert(block) {\n\t\tblock[intro_method](node, next);\n\t\tlookup[block.key] = block;\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\n\twhile (o && n) {\n\t\tvar new_block = new_blocks[n - 1];\n\t\tvar old_block = old_blocks[o - 1];\n\t\tvar new_key = new_block.key;\n\t\tvar old_key = old_block.key;\n\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t}\n\n\t\telse if (!new_lookup[old_key]) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t}\n\n\t\telse if (!lookup[new_key] || will_move[new_key]) {\n\t\t\tinsert(new_block);\n\t\t}\n\n\t\telse if (did_move[old_key]) {\n\t\t\to--;\n\n\t\t} else if (deltas[new_key] > deltas[old_key]) {\n\t\t\tdid_move[new_key] = true;\n\t\t\tinsert(new_block);\n\n\t\t} else {\n\t\t\twill_move[old_key] = true;\n\t\t\to--;\n\t\t}\n\t}\n\n\twhile (o--) {\n\t\tvar old_block = old_blocks[o];\n\t\tif (!new_lookup[old_block.key]) destroy(old_block, lookup);\n\t}\n\n\twhile (n) insert(new_blocks[n - 1]);\n\n\treturn new_blocks;\n}\n\nfunction measure(blocks) {\n\tconst rects = {};\n\tlet i = blocks.length;\n\twhile (i--) rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n\treturn rects;\n}\n\nfunction animate(blocks, rects, fn, params) {\n\tlet i = blocks.length;\n\twhile (i--) {\n\t\tconst block = blocks[i];\n\t\tconst from = rects[block.key];\n\n\t\tif (!from) continue;\n\t\tconst to = block.node.getBoundingClientRect();\n\n\t\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) continue;\n\n\n\t}\n}\n\nfunction getSpreadUpdate(levels, updates) {\n\tvar update = {};\n\n\tvar to_null_out = {};\n\tvar accounted_for = {};\n\n\tvar i = levels.length;\n\twhile (i--) {\n\t\tvar o = levels[i];\n\t\tvar n = updates[i];\n\n\t\tif (n) {\n\t\t\tfor (var key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\n\t\t\tfor (var key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (var key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\n\treturn update;\n}\n\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nconst invalidAttributeNameCharacter = /[\\s'\">\\/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n\nfunction spread(args) {\n\tconst attributes = Object.assign({}, ...args);\n\tlet str = '';\n\n\tObject.keys(attributes).forEach(name => {\n\t\tif (invalidAttributeNameCharacter.test(name)) return;\n\n\t\tconst value = attributes[name];\n\t\tif (value === undefined) return;\n\t\tif (value === true) str += \" \" + name;\n\n\t\tconst escaped = String(value)\n\t\t\t.replace(/\"/g, '&#34;')\n\t\t\t.replace(/'/g, '&#39;');\n\n\t\tstr += \" \" + name + \"=\" + JSON.stringify(escaped);\n\t});\n\n\treturn str;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t\"'\": '&#39;',\n\t'&': '&amp;',\n\t'<': '&lt;',\n\t'>': '&gt;'\n};\n\nfunction escape(html) {\n\treturn String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\n\nfunction each(items, assign, fn) {\n\tlet str = '';\n\tfor (let i = 0; i < items.length; i += 1) {\n\t\tstr += fn(assign(items[i], i));\n\t}\n\treturn str;\n}\n\nconst missingComponent = {\n\t_render: () => ''\n};\n\nfunction validateSsrComponent(component, name) {\n\tif (!component || !component._render) {\n\t\tif (name === 'svelte:component') name += ' this={...}';\n\t\tthrow new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n\t}\n\n\treturn component;\n}\n\nfunction debug(file, line, column, values) {\n\tconsole.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`);\n\tconsole.log(values);\n\treturn '';\n}\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = noop;\n\n\tthis._fragment.d(detach !== false);\n\tthis._fragment = null;\n\tthis._state = {};\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction _differs(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction _differsImmutable(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\tvar handler = handlers[i];\n\n\t\tif (!handler.__calling) {\n\t\t\ttry {\n\t\t\t\thandler.__calling = true;\n\t\t\t\thandler.call(this, data);\n\t\t\t} finally {\n\t\t\t\thandler.__calling = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction flush(component) {\n\tcomponent._lock = true;\n\tcallAll(component._beforecreate);\n\tcallAll(component._oncreate);\n\tcallAll(component._aftercreate);\n\tcomponent._lock = false;\n}\n\nfunction get() {\n\treturn this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._handlers = blankObject();\n\tcomponent._slots = blankObject();\n\tcomponent._bind = options._bind;\n\tcomponent._staged = {};\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = options.store || component.root.store;\n\n\tif (!options.root) {\n\t\tcomponent._beforecreate = [];\n\t\tcomponent._oncreate = [];\n\t\tcomponent._aftercreate = [];\n\t}\n}\n\nfunction on(eventName, handler) {\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tflush(this.root);\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tnewState = assign(this._staged, newState);\n\tthis._staged = {};\n\n\tfor (var key in newState) {\n\t\tif (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign(assign({}, oldState), newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tthis.fire(\"state\", { changed: changed, current: this._state, previous: oldState });\n\t\tthis._fragment.p(changed, this._state);\n\t\tthis.fire(\"update\", { changed: changed, current: this._state, previous: oldState });\n\t}\n}\n\nfunction _stage(newState) {\n\tassign(this._staged, newState);\n}\n\nfunction setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + '.set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\tset.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.shift()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment[this._fragment.i ? 'i' : 'm'](target, anchor || null);\n}\n\nvar PENDING = {};\nvar SUCCESS = {};\nvar FAILURE = {};\n\nfunction removeFromStore() {\n\tthis.store._remove(this);\n}\n\nvar proto = {\n\tdestroy,\n\tget,\n\tfire,\n\ton,\n\tset,\n\t_recompute: noop,\n\t_set,\n\t_stage,\n\t_mount,\n\t_differs\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget,\n\tfire,\n\ton,\n\tset: setDev,\n\t_recompute: noop,\n\t_set,\n\t_stage,\n\t_mount,\n\t_differs\n};\n\nexport { blankObject, destroy, destroyDev, _differs, _differsImmutable, fire, flush, get, init, on, set, _set, _stage, setDev, callAll, _mount, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, wrapAnimation, fixPosition, handlePromise, append, insert, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setAttributes, setCustomElementData, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setData, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, addResizeListener, toggleClass, destroyBlock, outroAndDestroyBlock, fixAndOutroAndDestroyBlock, updateKeyedEach, measure, animate, getSpreadUpdate, invalidAttributeNameCharacter, spread, escaped, escape, each, missingComponent, validateSsrComponent, debug, linear, generateRule, hash, wrapTransition, outros, groupOutros, transitionManager, noop, assign, assignTrue, isPromise, callAfter, addLoc, exclude, run };\n","<button ref:el class=\"action-btn\" on:click tabindex=\"0\" aria-label={type === 'next' ? 'Next' : 'Close'}>\n  {#if type === 'next'}\n    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"next-button\">\n      <g transform=\"scale(0.065), translate(140, 170)\">\n        <use xlink:href=\"#right-arrow\"></use>\n      </g>\n    </svg>\n  {:else}\n    {icon}\n  {/if}\n</button>\n\n<style lang=\"less\">\n@import 'src/main';\n\n@color: #fff;\n@buttonSize: 56px;\n@buttonBorderSize: 3px;\n\n.action-btn {\n  background: none;\n  z-index: @zindex + 3;\n  border-radius: 50%;\n  border: @buttonBorderSize solid @color;\n  height: 56px;\n  width: 56px;\n  position: fixed;\n  top: 0;\n  right: 0;\n  color: @color;\n  margin: 5vmin;\n  font-size: @buttonSize - 20px;\n  line-height: 58px; // floor(@buttonSize - (@buttonBorderSize * 2 * .75));\n  text-align: center;\n  cursor: pointer;\n  box-shadow: 0 2px 2px 0 rgba(255, 255, 255, 0.12), 0 1px 5px 0 rgba(255, 255, 255, 0.12), 0 3px 1px -2px rgba(255, 255, 255, 0.2);\n  font-family: sans-serif;\n}\n\n.next-button {\n  use {\n    fill: #fff;\n  }\n}\n</style>\n\n<script>\nexport default {\n  data() {\n    return {\n      // type: 'close',\n      icon: 'X',\n      // coachmark: null,\n      // flow: null,\n    }\n  },\n  oncreate() {\n    this.refs.el.focus();\n  },\n  // methods: {\n  //   handleClick() {\n  //     const coachmark = this.get().coachmark;\n  //     if (!coachmark) {\n  //       console.error('No coachmark specified for action button');\n  //       return;\n  //     }\n\n  //     let flow = cache('flow');\n  //     if (coachmark.flow) flow = cache.set('flow', coachmark.flow);\n\n  //     if (flow) {\n  //       const next = flow.getNext(coachmark.name);\n  //       if (next) {\n  //         this.type = 'next';\n  //         return this.fire('next', { next });\n  //       } else cache.remove('flow');\n  //     }\n\n  //     this.clear();\n  //   },\n  //   clear() {\n  //     this.fire('clear');\n  //   },\n  // }\n}\n</script>\n","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","<svelte:window on:resize=\"redraw()\" on:scroll=\"redraw()\" on:orientationchange=\"position()\"></svelte:window>\n\n<script>\nimport LeaderLine from 'leader-line';\nimport raf from 'raf';\n\nconst COLOR = '#fff';\n\nexport default {\n  data: () => ({\n    line: null,\n    from: null,\n    to: null,\n  }),\n  onstate({ current }) {\n    this.redraw();\n  },\n  methods: {\n    redraw() {\n      if (this.line) this.line.remove();\n      \n      raf(() => {\n        this.leaderLine(this.get().from, this.get().to);\n      });\n    },\n    leaderLine(from, to) {\n      // console.log(from, to, this)\n      if (!from || !to) return;\n      if (this.line) {\n        try {\n          // NOTE: this fails if we try to remove in the middle of it rendering\n          this.line.remove();\n        } catch (e) {\n          // ...\n        }\n      }\n\n      const anchorOpts = {};\n  \n      this.line = new LeaderLine(\n        LeaderLine.areaAnchor(from, anchorOpts),\n        LeaderLine.areaAnchor(to, anchorOpts),\n        {\n          color: COLOR,\n          endPlugColor: COLOR,\n          startPlugColor: COLOR,\n          // endPlugSize: 0.5,\n        },\n      );\n\n      this.line.path = 'fluid';\n      this.line.position();\n\n      // Put filter on lines after they've been drawn\n      const lines = document.querySelectorAll('.leader-line-line-path');\n      Array.prototype.forEach.call(lines, line => {\n        // TODO: I've disabled the chalk roughness for now, until I can find a way to make the text rough as well\n        line.setAttribute('filter', 'url(#coachmark-chalk)');\n      });\n    }\n  },\n  ondestroy() {\n    if (this.line) this.line.remove();\n  },\n};\n</script>\n\n<style lang=\"less\">\n@import 'src/main';\n\n:global(.leader-line) {\n  z-index: @zindex + 3;\n}\n</style>","<svelte:window on:resize=\"redraw()\" on:scroll=\"redraw()\" on:orientationchange=\"redraw()\"></svelte:window>\n<div ref:top class=\"top { shown ? 'shown' : '' }\"></div>\n<div ref:right class=\"right { shown ? 'shown' : '' }\"></div>\n<div ref:bottom class=\"bottom { shown ? 'shown' : '' }\"></div>\n<div ref:left class=\"left { shown ? 'shown' : '' }\"></div>\n<div ref:glow class=\"glow { shown ? 'shown' : '' }\"></div>\n\n<script>\nimport isDom from 'is-dom';\nimport raf from 'raf';\n\nexport default {\n  data: () => ({\n    shown: false,\n  }),\n  onstate({ changed, current, previous }) {\n    raf(() => {\n      this.redraw();\n    });\n  },\n  methods: {\n    redraw() {\n      const { target: element } = this.get();\n      if (!element || !isDom(element)) {\n        this.set({ shown: false });\n        return;\n      }\n\n      // TODO: refactor use to elementRect() function which is in Text.svelte\n      const rect = element.getBoundingClientRect();\n\n      // Overlay\n      const top = rect.top;\n      const left = rect.left;\n      const width = rect.width;\n      const height = rect.height;\n      const right = left + width;\n      const bottom = top + height;\n\n      this.refs.top.style.height = top + 'px';\n      this.refs.left.style.top = top + 'px';\n      this.refs.right.style.top = this.refs.left.style.top;\n      this.refs.left.style.height = height + 'px';\n      this.refs.right.style.height = this.refs.left.style.height;\n      this.refs.left.style.width = left + 'px';\n      this.refs.right.style.left = right + 'px';\n      this.refs.bottom.style.top = bottom + 'px';\n\n      // Glow\n      const borderRadius = window.getComputedStyle(element).getPropertyValue('border-radius');\n      const glow = this.refs.glow;\n      glow.style.top = (top) + 'px';\n      glow.style.left = (left) + 'px';\n      glow.style.width = (width) + 'px';\n      glow.style.height = (height) + 'px';\n      glow.style['border-radius'] = borderRadius;\n      glow.style['box-shadow'] = '0 0 ' + 20 + 'px ' + 10 + 'px #fff'; //  TODO: this style should probably be dynamic\n    },\n    methods: {\n      show() {\n        this.set({ shown: true });\n      },\n      hide() {\n        this.set({ shown: false });\n      },\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n@import 'src/main';\n\n  .overlay {\n    display: none;\n\n    &.shown {\n      display: block;\n    }\n  }\n\n  .top,\n  .left,\n  .right,\n  .bottom {\n    position: fixed;\n    background: #000;\n    opacity: 0.66;\n    margin: 0;\n    padding: 0;\n    z-index: @zindex + 1;\n  }\n\n  .top {\n    top: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n  }\n\n  .left {\n    left: 0;\n  }\n\n  .right {\n    right: 0;\n  }\n\n  .bottom {\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n  }\n\n  .glow {\n    position: fixed;\n    z-index: @zindex + 1;\n  }\n</style>\n","<svelte:window on:resize=\"position()\" on:scroll=\"position()\" on:orientationchange=\"position()\"></svelte:window>\n<div ref:container class=\"text-container\" id={id}>\n  <div ref:text class=\"text\" style=\"font-size: {textSize}vmin; line-height: {textSize}vmin;\">{ text }</div>\n</div>\n\n<style lang=\"less\">\n@import 'src/main';\n\n.text-container {\n  position: fixed;\n  display: flex;\n  box-sizing: border-box;\n  justify-content: center;\n  align-items: center;\n  padding: 5vmin;\n  z-index: @zindex + 2;\n}\n\n.text {\n  /* font-size: 11vmin; */\n  font-family: 'Short Stack', cursive; // TODO: dynamic\n  /* line-height: 11vmin; // 11vmin looks better sometimes */\n  color: #fefefe;\n  text-shadow: 2px 2px #333;\n  /* z-index: 2; */\n  word-break: break-word;\n  hyphens: auto;\n}\n</style>\n\n<script>\nimport isDom from 'is-dom';\nimport raf from 'raf';\n\nexport default {\n  data: () => ({\n    id: null,\n    text: '',\n    target: null,\n    textSize: 11,\n  }),\n  onstate({ changed, current }) {\n    if (changed.target && isDom(current.target)) {\n      raf(() => {\n        this.position();\n      });\n    }\n  },\n  methods: {\n    position() {\n      const box = chooseRenderBox(this.get().target);\n\n      this.refs.container.style.top = box.top + 'px';\n      this.refs.container.style.left = box.left + 'px';\n      this.refs.container.style.width = box.width + 'px';\n      this.refs.container.style.height = box.height + 'px';\n\n      const vmin = Math.min(document.body.offsetHeight, document.body.offsetWidth);\n      // Quadratic function to fit vmin size to actual vmin so it looks nice\n      const textSize = Math.max(6, -0.0000163847 * vmin**2 + 0.0102378 * vmin + 7.47434);\n      this.set({ textSize });\n    }\n  }\n}\n\nfunction chooseRenderBox(elm) {\n  const [box1, box2] = splitScreen();\n\n  // See if the element is in box1 or box2;\n  const elmMiddle = middleOfNode(elm);\n  const flooredElmMiddle = { x: Math.floor(elmMiddle[0]), y: Math.floor(elmMiddle[1]) };\n\n  if (rectContains(flooredElmMiddle, box1)) return box2;\n  else return box1;\n}\n\nfunction splitScreen() {\n  // const pixelRatio = window.devicePixelRatio || 1;\n  const w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n  const h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\n  let box1;\n  let box2;\n\n  // Split vertically\n  if (w > h) {\n    const boxWidth = Math.floor(w / 2);\n    box1 = {\n      top: 0,\n      left: 0,\n      height: h,\n      width: boxWidth,\n    };\n    box2 = {\n      top: 0,\n      left: boxWidth,\n      height: h,\n      width: w - boxWidth,\n    };\n  } else {\n    const boxHeight = Math.floor(h / 2);\n    box1 = {\n      top: 0,\n      left: 0,\n      height: boxHeight,\n      width: w,\n    };\n    box2 = {\n      top: boxHeight,\n      left: 0,\n      height: h - boxHeight,\n      width: w,\n    };\n  }\n\n  return [box1, box2];\n}\n\nfunction elementRect(node, offsetParent) {\n  if (offsetParent === true) offsetParent = node.offsetParent;\n\n  const rect = node.getBoundingClientRect();\n  const prect = offsetParent ?\n    offsetParent.getBoundingClientRect() :\n    { left: 0, top: 0 };\n\n  return {\n    left: rect.left - prect.left,\n    top: rect.top - prect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n\nfunction middleOfNode(node) {\n  let rect = node;\n  if (node instanceof Node) {\n    rect = elementRect(node, false);\n  }\n\n  return [rect.left + (rect.width / 2), rect.top + (rect.height / 2)];\n}\n\nfunction rectContains({ x, y }, { left, top, width, height }) {\n  return left <= x && x <= left + width &&\n         top <= y && y <= top + height;\n}\n</script>\n","let injected = false;\n\nexport default function injectSVG(svg) {\n  if (injected) return;\n\n  const s = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  s.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n  s.setAttribute('width', 0);\n  s.setAttribute('height', 0);\n  s.innerHTML = svg;\n  document.body.insertBefore(s, document.body.firstChild);\n\n  injected = true;\n\n  return s;\n}\n","// Singleton registry\nconst _listeners = {};\n\nfunction on(event, fn) {\n  _listeners[event] = _listeners[event] || [];\n  const subs = _listeners[event];\n  subs.push(fn);\n\n  return function () {\n    const index = subs.indexOf(fn);\n    if (index !== -1) subs.splice(index, 1);\n\n    if (subs.length === 0) delete _listeners[event];\n  };\n}\n\nfunction fire(event, ...args) {\n  if (event in _listeners) {\n    for (const fn of _listeners[event]) {\n      fn(...args);\n    }\n  }\n}\n\nfunction reset() {\n  for (const key of Object.keys(_listeners)) {\n    delete _listeners[key];\n  }\n}\n\nexport default {\n  on,\n  fire,\n  reset,\n};\n","export function uniquestring() {\n  return Math.random().toString(36).substr(2);\n}\n","import Popper from 'popper.js';\nimport isDom from 'is-dom';\nimport { waitForTheElement } from 'wait-for-the-element';\nimport Registry from './registry';\nimport PubSub from './events';\nimport { uniquestring } from './util';\n\nexport function close() {\n  this.destroy();\n}\n\nfunction attachEl() {\n  const createPopper = attachEl => {\n    if (!this.refs || !this.refs.el) return;\n    this.popper = new Popper(attachEl, this.refs.el, { ...this.options });\n    this.on('destroy', () => {\n      this.popper.destroy();\n    });\n  };\n\n  let { attach } = this.options;\n  const comp = Registry.component(attach);\n  if (comp && comp.instance) attach = comp.instance.refs.el;\n\n  // TODO: handle `attach` that is a component in the registry\n  // If the `attach` option is an element, use it right away. Otherwise wait (2.5s by default) for the attach element\n  //   to exist.\n  if (isDom(attach)) {\n    this.set({ attach });\n    createPopper(attach);\n  } else {\n    waitForTheElement(attach)\n      .then(attachEl => {\n        this.set({ attach: attachEl });\n        createPopper(attachEl);\n      });\n  }\n}\n\nfunction generateEventHandler(handler, mappedComponent) {\n  if (typeof (handler) === 'function') return handler;\n\n  const [pair1 = '', pair2 = ''] = handler.split(/\\./);\n  const comp = Registry.component(pair1);\n  const tour = Registry.tour(pair1);\n\n  if (comp) {\n    const { component, args } = comp;\n\n    // Do something with a component\n    if (!pair2 || pair2 === 'show') {\n      handler = () => {\n        // Show if not already instanced\n        if (Registry.component(args.name).instance) return;\n        new component(args); /* eslint-disable-line no-new */\n      };\n    } else if (pair2 === 'hide') {\n      handler = () => {\n        if (comp.instance) comp.instance.close();\n      };\n    }\n  } else if (tour) {\n    // TODO: Do something with a tour\n    // tour.\n  } else if (handler === 'close') {\n    handler = () => {\n      if (mappedComponent.instance) mappedComponent.instance.close();\n    };\n  } else if (handler === 'next') {\n    handler = () => Registry.activeTour().next(); // TODO: this will throw if there's no activeTour, add a guard?\n  } else if (handler === 'show') {\n    // TODO: this one will need to work when generating handlers for components that don't exist in the DOM yet\n    handler = () => {\n      if (mappedComponent) {\n        const { component, args } = mappedComponent;\n        if (Registry.component(args.name).instance) return;\n        if (component) new component(args); /* eslint-disable-line no-new */\n      }\n    };\n  } else {\n    throw new Error(`Unknown event handler ${handler}`);\n  }\n\n  return handler;\n}\n\nexport function registerForEvents(eventArg = {}, mappedComponent) {\n  for (const [events, handler] of Object.entries(eventArg)) {\n    for (let event of [].concat(events)) {\n      event = event.trim();\n\n      const h = generateEventHandler.call(this, handler, mappedComponent);\n\n      // Event key is a DOM event\n      if (['click', 'mouseover', 'mouseout', 'contextmenu', 'dblclick'].includes(event)) {\n        // This is not an instanced component, so no interactive events can be attached yet\n        if (!this || !this.refs) return;\n        this.refs.el.addEventListener(event, h);\n        this.on('destroy', () => this.refs.el.removeEventListener(event, h));\n      } else {\n        // Treat event as an Onboardist event\n        const dereg = PubSub.on(event, h);\n        if (this) this.on('destroy', dereg);\n      }\n    }\n  }\n}\n\nexport function oncreate() {\n  // Set name to a random string if not already set\n  if (!this.get().name) this.set({ name: uniquestring() });\n\n  // Attach element to a DOM element if necessary\n  if (this.options.attach) attachEl.call(this);\n\n  const { name } = this.get();\n  const args = Object.assign({}, this.options);\n  delete args.data;\n\n  if (!Registry.component(name)) {\n    const mappedComponent = {\n      component: args.component,\n      name,\n      args,\n      instance: this,\n    };\n    Registry.registerComponent(mappedComponent);\n    if (this.options.events) registerForEvents.call(this, this.options.events, mappedComponent);\n  }\n\n  // Register instance globally\n  Registry.registerInstance({ name: this.get().name, instance: this });\n}\n\nexport function ondestroy() {\n  Registry.deregisterInstance(this.get().name);\n}\n\nexport function expandButtonArgs(buttons) {\n  if (!buttons) return buttons;\n\n  return buttons.map(button => {\n    if (typeof (button) !== 'string') return button;\n\n    switch (button.toLowerCase()) {\n      // TODO: remove this? next button should only be added by Tours, I think\n      // case ('next'):\n      //   return { text: 'Next', handler() { Onboardist.UI.next(); } };\n      case ('ok'):\n        return {\n          type: 'close',\n          text: 'OK',\n          handler() {\n            this.close();\n          },\n        };\n      default:\n        return button;\n    }\n  });\n}\n","<svelte:window on:keydown=\"keypress(event)\"/>\n<NineSlice {target}></NineSlice>\n<div class=\"onboardist-coachmark\"\n  role=\"alertdialog\"\n  aria-modal=\"true\"\n  aria-label={title || content}\n  aria-describedby={textId}\n>\n  {#if buttons}\n    {#each buttons as button}\n      {#if typeof(button) === 'object'}\n        <ActionButton type={button.type} on:click=\"call(button.handler)\"></ActionButton>\n      {/if}\n    {/each}\n  {:else}\n    &nbsp;\n  {/if}\n  <Text ref:text id={textId} text={content} {target}></Text>\n  <Arrow from={textElement} to={target}></Arrow>\n</div>\n\n<script>\nimport ActionButton from './coachmark/ActionButton.svelte';\nimport Arrow from './coachmark/Arrow.svelte';\nimport NineSlice from './NineSlice.svelte';\nimport Text from './coachmark/Text.svelte';\nimport injectSVG from './coachmark/inject-svg';\nimport svg from './coachmark/defs.svg';\nimport { close, expandButtonArgs, oncreate, ondestroy, } from '../methods';\nimport { uniquestring } from '../util';\n\nexport default {\n  data: () => ({\n    buttons: ['ok'],\n    target: null,\n    textElement: null,\n    textId: uniquestring(),\n  }),\n  components: { ActionButton, Arrow, NineSlice, Text },\n  oncreate() {\n    injectSVG(svg);\n\n    return oncreate.call(this);\n  },\n  onstate({ changed, current, previous }) {\n    if (!previous && this.get().buttons) this.set({ buttons: expandButtonArgs(this.get().buttons) });\n\n    if (current.attach) this.set({ target: current.attach });\n    if (this.refs && this.refs.text) this.set({ textElement: this.refs.text.refs.text });\n  },\n  ondestroy,\n  methods: {\n    call(fn, ...args) {\n      fn.call(this, ...args);\n    },\n    close,\n    keypress(event) {\n      if (event.key === 'Escape') this.close();\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n</style>","export default {\n  colors: {\n    active: '#62A8FC',\n    lightText: '#fff',\n  },\n};\n","<div>\n  {#if backdrop}\n    <div class=\"onboardist-backdrop\"></div>\n  {/if}\n</div>\n\n<script>\nexport default {\n  data: () => ({\n    backdrop: false,\n  }),\n  oncreate() {\n    // Singleton\n    if (!document.querySelector('.onboardist-backdrop')) {\n      this.set({ backdrop: true });\n    } else {\n      this.destroy();\n    }\n  },\n}\n</script>\n\n<style lang=\"less\">\n@import 'src/main';\n\n.onboardist-backdrop {\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: @zindex - 1;\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n}\n</style>","<div ref:el>\n  <div class=\"hotspot { style }\">\n    <div class=\"dot\" style=\"width: { size }px; height: { size }px; margin: -{ size / 2 }px\"></div>\n\n    {#if style == 'pulse'}\n      <div class=\"pulse\" style=\"width: { size }px; height: { size }px; margin: -{ size / 2 }px\"></div>\n    {/if}\n    {#if style == 'teardrop'}\n      <div class=\"hotspot-arrow\"></div>\n    {/if}\n  </div>\n</div>\n{#if backdrop}<Backdrop></Backdrop>{/if}\n\n<script>\nimport Config from '../config';\nimport Backdrop from './Backdrop.svelte';\nimport { oncreate, ondestroy } from '../methods';\n\nexport default {\n  oncreate() {\n    // NOTE: this was an attempt to make the popper overlap the element slightly. Turns out just making it\n    //   0w x 0h is easier\n    // this.options = {\n    //   ...this.options,\n    //   modifiers: {\n    //     offset: {\n    //       enabled: true,\n    //       offset: `-50%p,-50%p`, // -${this.get().size / 2}px\n    //     },\n    //     flip: {\n    //       enabled: false,\n    //     }\n    //   },\n    // };\n\n    return oncreate.call(this);\n  },\n  ondestroy,\n  components: { Backdrop },\n  data: () => ({\n    backdrop: false,\n    color: Config.colors.active,\n    style: 'pulse',\n    size: 20,\n  }),\n};\n</script>\n\n<style lang=\"less\">\n@import 'src/main';\n/* @color: #62A8FC; */\nref:el {\n  z-index: @zindex;\n}\n\n.hotspot {\n  position: absolute;\n  z-index: @zindex;\n  cursor: pointer;\n\n  .dot {\n    position: absolute;\n    z-index: @zindex;\n    top: 50%;\n    left: 50%;\n\n    border-radius: 50%;\n    background-color: @color;\n  }\n\n  &.pulse {\n    .dot {\n      border: 2px solid darken(@color, 5%);\n    }\n\n    .pulse {\n      border-radius: 50%;\n      position: absolute;\n      z-index: @zindex;\n      top: 50%;\n      left: 50%;\n\n      border: 2px solid @color;\n      animation: pulsate 2s ease-out;\n      animation-iteration-count: infinite;\n    }\n\n    @keyframes pulsate {\n      0% {\n        transform: scale(1.0, 1.0);\n        opacity: 0.9;\n      }\n      100% {\n        transform: scale(2.5, 2.5);\n        opacity: 0.0;\n      }\n    }\n  }\n\n  &.teardrop {\n    .dot { border-top-left-radius: 0; }\n\n    :global([x-placement^=\"top\"]) & .dot {\n      transform: rotate(225deg);\n    }\n\n    :global([x-placement^=\"right\"]) & .dot {\n      transform: rotate(315deg);\n    }\n\n    :global([x-placement^=\"bottom\"]) & .dot {\n      transform: rotate(45deg);\n    }\n\n    :global([x-placement^=\"top\"]) & .dot {\n      transform: rotate(315deg);\n    }\n  }\n}\n</style>","<div class=\"box\" ref:el>\n    {#if title}\n      <div class=\"box-header\" style=\"background-color: { backgroundColor }; color: { headerTextColor }\">{ title }</div>\n    {/if}\n    <div class=\"box-content\">\n      <slot name=\"content\"></slot>\n    </div>\n    <div class=\"box-buttons\">\n      <slot name=\"buttons\">&nbsp;</slot>\n    </div>\n</div>\n\n<script>\nimport config from '../config';\n\nexport default {\n  data: () => ({\n    title: '',\n    content: '',\n    backgroundColor: config.colors.active,\n    headerTextColor: config.colors.lightText,\n  }),\n};\n</script>\n\n<style lang=\"less\">\n@import 'src/main';\n\n.box {\n  margin: 5px;\n  display: inline-block;\n  border-radius: 8px;\n  box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.05);\n  /* min-width: 100px;\n  min-height: 100px; */\n  background: white;\n  text-align: initial;\n\n  .box-header {\n    font-size: 18px;\n    font-weight: bold;\n    padding: 12px 20px;\n    border-radius: 8px 8px 0 0;\n    text-align: center;\n  }\n\n  .box-content {\n    padding: 20px;\n    text-align: left;\n  }\n\n  .box-buttons {\n    color: inherit;\n\n    :global([slot]) {\n      display: flex;\n      justify-content: flex-end;\n    }\n  }\n}\n</style>","<svelte:window on:keydown=\"keypress(event)\"/>\n<div ref:el class=\"oboardist-container modal\"\n  role=\"alertdialog\"\n  aria-modal=\"true\"\n  aria-label={title || content}\n  aria-describedby=\"coachmark-modal-content-{id}\"\n>\n  <Box ref:box title={title}>\n    <div id=\"coachmark-modal-content-{id}\" slot=\"content\">{@html content}</div>\n    <div slot=\"buttons\">\n      {#if buttons}\n        {#each buttons as button}\n          <button type=\"button\" tabindex=\"0\" class=\"onboardist-button\" on:click=\"call(button.handler)\">{button.text}</button>\n        {/each}\n      {:else}\n        &nbsp;\n      {/if}\n    </div>\n  </Box>\n</div>\n{#if backdrop}\n  <div class:backdrop=\"backdrop\"></div>\n{/if}\n\n<script>\nimport Box from './Box.svelte';\nimport { close, expandButtonArgs, oncreate, ondestroy } from '../methods';\nimport { uniquestring } from '../util';\n\nexport default {\n  oncreate() {\n    if (this.get().buttons) this.set({ buttons: expandButtonArgs(this.get().buttons) });\n\n    // Focus first button\n    const firstButton = this.refs.el.querySelector('button');\n    if (firstButton) firstButton.focus();\n\n    return oncreate.call(this);\n  },\n  ondestroy,\n  components: { Box },\n  data() {\n    return {\n      id: uniquestring(),\n      title: '',\n      buttons: ['ok'],\n      content: '',\n      backdrop: true,\n    };\n  },\n  methods: {\n    close,\n    call(fn, ...args) {\n      fn.call(this, ...args);\n    },\n    keypress(event) {\n      if (event.key === 'Escape') this.close();\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n@import 'src/main';\n\n.fullscreen() {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n}\n\n.oboardist-container {\n  .fullscreen();\n\n  z-index: @zindex;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.backdrop {\n  .fullscreen();\n  z-index: @zindex - 1;\n  background: black;\n  opacity: 0.3;\n}\n\n:global(.oboardist-container .box) {\n  border: none !important;\n  z-index: @zindex+1;\n  box-shadow: 0 0 50px 10px rgba(0, 0, 0, 0.2) !important;\n\n  .positioned {\n    /* position: absolute;\n    margin: auto;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0; */\n  }\n}\n</style>","<div ref:el class=\"onboardist-container\">\n  <div class=\"tooltip\" role=\"dialog\" aria-label={title || content} aria-describedby=\"coachmark-tooltip-content-{id}\">\n    <Box ref:box title={title}>\n      <div slot=\"content\" id=\"coachmark-tooltip-content-{id}\">{@html content}</div>\n      <div slot=\"buttons\">\n        {#if buttons && buttons.length > 0}\n          {#each buttons as button}\n            <button type=\"button\" tabindex=\"0\" class=\"onboardist-button\" on:click=\"call(button.handler)\">{button.text}</button>\n          {/each}\n        {/if}\n      </div>\n    </Box>\n    <div class=\"tooltip-arrow\" x-arrow></div>\n  </div>\n</div>\n{#if backdrop}<Backdrop></Backdrop>{/if}\n\n<script>\nimport Backdrop from './Backdrop.svelte';\nimport Box from './Box.svelte';\nimport { close, expandButtonArgs, oncreate, ondestroy } from '../methods';\nimport { uniquestring } from '../util';\n\nexport default {\n  components: { Backdrop, Box },\n  oncreate() {\n    this.options.modifiers = this.options.modifiers || {};\n    if (this.get().buttons) this.set({ buttons: expandButtonArgs(this.get().buttons) });\n\n    // Focus first button\n    const firstButton = this.refs.el.querySelector('button');\n    if (firstButton) firstButton.focus();\n\n    return oncreate.call(this);\n  },\n  ondestroy,\n  data: () => ({\n    id: uniquestring(),\n    title: '',\n    content: '',\n    backdrop: false,\n    buttons: ['ok'],\n  }),\n  methods: {\n    close,\n    call(fn, ...args) {\n      fn.call(this, ...args);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n@import 'src/main';\n\n.onboardist-container {\n  margin: 5px;\n  z-index: @zindex;\n\n  :global(&[x-placement^=\"right\"]) {\n    margin-left: 10px;\n  }\n\n  :global(&[x-placement^=\"left\"]) {\n    margin-right: 10px;\n  }\n\n  :global(&[x-placement^=\"bottom\"]) {\n    margin-top: 10px;\n  }\n\n  :global(&[x-placement^=\"top\"]) {\n    margin-bottom: 10px;\n  }\n}\n\n.tooltip {\n  border-radius: 12px;\n  box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.05);\n  background: rgba(0, 0, 0, 0);\n\n  :global(.box) {\n    margin: 0 !important;\n    color: white;\n    background-color: @color !important;\n  }\n\n  :global(.box > .box-content:first-child) {\n    padding-top: 10px !important;\n  }\n\n  :global(.box > div:last-child) {\n    padding-bottom: 5px !important;\n  }\n\n  :global(.box .box-header) {\n    padding: 10px !important;\n  }\n\n  :global(.box .box-content) {\n    padding: 5px 10px !important;\n  }\n\n  :global(.box .box-buttons) {\n    padding: 0;\n  }\n\n  :global(.box .box-buttons button) {\n    background-color: @color;\n    color: white;\n    border-color: white;\n  }\n\n  .header {\n    font-size: 18px;\n    font-weight: bold;\n    padding: 12px 20px;\n    border-radius: 12px 12px 0 0;\n  }\n\n  .content {\n    padding: 5px 20px 20px;\n  }\n\n  .tooltip-arrow {\n    background: @color;\n    height: 10px;\n    width: 10px;\n    position: absolute;\n    display: inline-block;\n    transform: rotate(45deg);\n\n    :global([x-placement^=\"right\"]) & {\n      left: -3px;\n    }\n\n    :global([x-placement^=\"left\"]) & {\n      right: -3px;\n    }\n\n    :global([x-placement^=\"bottom\"]) & {\n      top: -3px;\n    }\n\n    :global([x-placement^=\"top\"]) & {\n      bottom: -3px;\n    }\n  }\n}\n</style>","import { default as CoachmarkComponent } from './Coachmark.svelte';\nimport { default as HotspotComponent } from './Hotspot.svelte';\nimport { default as ModalComponent } from './Modal.svelte';\nimport { default as TooltipComponent } from './Tooltip.svelte';\n\nexport { CoachmarkComponent, HotspotComponent, ModalComponent, TooltipComponent };\n\nconst props = ['backdrop', 'buttons', 'content', 'events', 'name', 'style', 'title'];\n\nfunction genericConstructor(component, args) {\n  const data = {};\n  props.forEach(x => {\n    if (x in args) data[x] = args[x];\n  });\n\n  return new component({\n    ...args,\n    data,\n    target: document.querySelector('body'),\n  });\n}\n\nexport class Coachmark {\n  constructor(args) {\n    args.component = 'coachmark';\n    return genericConstructor(CoachmarkComponent, args);\n  }\n}\n\nexport class Hotspot {\n  constructor(args) {\n    args.component = 'hotspot';\n    return genericConstructor(HotspotComponent, args);\n  }\n}\n\nexport class Modal {\n  constructor(args) {\n    args.component = 'modal';\n    return genericConstructor(ModalComponent, args);\n  }\n}\n\nexport class Tooltip {\n  constructor(args) {\n    args.component = 'tooltip';\n    return genericConstructor(TooltipComponent, args);\n  }\n}\n","import { Coachmark, Hotspot, Modal, Tooltip } from './components';\nimport { uniquestring } from './util';\nimport { registerForEvents } from './methods';\n\n// TODO: rewrite with Map()\n// Singleton registry\nconst _registry = {\n  tours: {},\n  components: {},\n  listeners: [],\n\n  activeTour: null,\n};\n\nexport const ComponentMap = {\n  coachmark: Coachmark,\n  hotspot: Hotspot,\n  modal: Modal,\n  tooltip: Tooltip,\n};\n\nfunction clear() {\n  destroyInstances();\n\n  for (const key of Object.keys(_registry.components)) {\n    delete _registry.components[key];\n  }\n\n  for (const key of Object.keys(_registry.tours)) {\n    delete _registry.tours[key];\n  }\n}\n\nfunction component(name) {\n  return _registry.components[name];\n}\n\nfunction tour(name) {\n  return _registry.tours[name];\n}\n\nfunction registerComponent({ name, component, args, instance }) {\n  if (!name) name = uniquestring();\n  args = args || {};\n  args.name = name;\n\n  if (component in ComponentMap) component = ComponentMap[component];\n\n  _registry.components[name] = {\n    component,\n    args,\n    instance,\n  };\n\n  // TODO: this doesn't belong here. Causing circular dependency\n  // registerForEvents.call(this, args.events, _registry.components[name]);\n\n  return _registry.components[name];\n}\n\nfunction registerTour(tour) {\n  tour.name = tour.name || uniquestring();\n\n  _registry.tours[tour.name] = tour;\n\n  return tour;\n}\n\nfunction activeTour() {\n  return _registry.activeTour;\n}\n\nfunction setActiveTour(tour) {\n  if (typeof tour === 'string') tour = _registry.tours[tour];\n  if (!tour) throw new Error('No tour specified');\n  if (typeof tour !== 'object');\n\n  _registry.activeTour = tour;\n}\n\nfunction registerInstance({ name, instance }) {\n  if (!name) throw new Error('No component name provided');\n  if (!instance) throw new Error('No component instance provided');\n\n  _registry.components[name] = _registry.components[name] || {};\n  _registry.components[name].instance = instance;\n}\n\nfunction deregisterInstance(name) {\n  if (name in _registry.components) {\n    if (_registry.components[name].instance) _registry.components[name].instance.destroy();\n    delete _registry.components[name].instance;\n  }\n}\n\nfunction destroyInstances() {\n  for (const component of Object.values(_registry.components)) {\n    if (component.instance) {\n      component.instance.destroy();\n      delete component.instance;\n    }\n  }\n}\n\nexport default {\n  _registry,\n\n  activeTour,\n  clear,\n  component,\n  deregisterInstance,\n  destroyInstances,\n  registerComponent,\n  registerTour,\n  registerInstance,\n  setActiveTour,\n  tour,\n};\n","import {\n\tassign,\n\tblankObject,\n\t_differs,\n\t_differsImmutable,\n\tget,\n\ton,\n\tfire\n} from './shared.js';\n\nfunction Store(state, options) {\n\tthis._handlers = {};\n\tthis._dependents = [];\n\n\tthis._computed = blankObject();\n\tthis._sortedComputedProperties = [];\n\n\tthis._state = assign({}, state);\n\tthis._differs = options && options.immutable ? _differsImmutable : _differs;\n}\n\nassign(Store.prototype, {\n\t_add(component, props) {\n\t\tthis._dependents.push({\n\t\t\tcomponent: component,\n\t\t\tprops: props\n\t\t});\n\t},\n\n\t_init(props) {\n\t\tconst state = {};\n\t\tfor (let i = 0; i < props.length; i += 1) {\n\t\t\tconst prop = props[i];\n\t\t\tstate['$' + prop] = this._state[prop];\n\t\t}\n\t\treturn state;\n\t},\n\n\t_remove(component) {\n\t\tlet i = this._dependents.length;\n\t\twhile (i--) {\n\t\t\tif (this._dependents[i].component === component) {\n\t\t\t\tthis._dependents.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\t_set(newState, changed) {\n\t\tconst previous = this._state;\n\t\tthis._state = assign(assign({}, previous), newState);\n\n\t\tfor (let i = 0; i < this._sortedComputedProperties.length; i += 1) {\n\t\t\tthis._sortedComputedProperties[i].update(this._state, changed);\n\t\t}\n\n\t\tthis.fire('state', {\n\t\t\tchanged,\n\t\t\tprevious,\n\t\t\tcurrent: this._state\n\t\t});\n\n\t\tthis._dependents\n\t\t\t.filter(dependent => {\n\t\t\t\tconst componentState = {};\n\t\t\t\tlet dirty = false;\n\n\t\t\t\tfor (let j = 0; j < dependent.props.length; j += 1) {\n\t\t\t\t\tconst prop = dependent.props[j];\n\t\t\t\t\tif (prop in changed) {\n\t\t\t\t\t\tcomponentState['$' + prop] = this._state[prop];\n\t\t\t\t\t\tdirty = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (dirty) {\n\t\t\t\t\tdependent.component._stage(componentState);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.forEach(dependent => {\n\t\t\t\tdependent.component.set({});\n\t\t\t});\n\n\t\tthis.fire('update', {\n\t\t\tchanged,\n\t\t\tprevious,\n\t\t\tcurrent: this._state\n\t\t});\n\t},\n\n\t_sortComputedProperties() {\n\t\tconst computed = this._computed;\n\t\tconst sorted = this._sortedComputedProperties = [];\n\t\tconst visited = blankObject();\n\t\tlet currentKey;\n\n\t\tfunction visit(key) {\n\t\t\tconst c = computed[key];\n\n\t\t\tif (c) {\n\t\t\t\tc.deps.forEach(dep => {\n\t\t\t\t\tif (dep === currentKey) {\n\t\t\t\t\t\tthrow new Error(`Cyclical dependency detected between ${dep} <-> ${key}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tvisit(dep);\n\t\t\t\t});\n\n\t\t\t\tif (!visited[key]) {\n\t\t\t\t\tvisited[key] = true;\n\t\t\t\t\tsorted.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const key in this._computed) {\n\t\t\tvisit(currentKey = key);\n\t\t}\n\t},\n\n\tcompute(key, deps, fn) {\n\t\tlet value;\n\n\t\tconst c = {\n\t\t\tdeps,\n\t\t\tupdate: (state, changed, dirty) => {\n\t\t\t\tconst values = deps.map(dep => {\n\t\t\t\t\tif (dep in changed) dirty = true;\n\t\t\t\t\treturn state[dep];\n\t\t\t\t});\n\n\t\t\t\tif (dirty) {\n\t\t\t\t\tconst newValue = fn.apply(null, values);\n\t\t\t\t\tif (this._differs(newValue, value)) {\n\t\t\t\t\t\tvalue = newValue;\n\t\t\t\t\t\tchanged[key] = true;\n\t\t\t\t\t\tstate[key] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis._computed[key] = c;\n\t\tthis._sortComputedProperties();\n\n\t\tconst state = assign({}, this._state);\n\t\tconst changed = {};\n\t\tc.update(state, changed, true);\n\t\tthis._set(state, changed);\n\t},\n\n\tfire,\n\n\tget,\n\n\ton,\n\n\tset(newState) {\n\t\tconst oldState = this._state;\n\t\tconst changed = this._changed = {};\n\t\tlet dirty = false;\n\n\t\tfor (const key in newState) {\n\t\t\tif (this._computed[key]) throw new Error(`'${key}' is a read-only computed property`);\n\t\t\tif (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t\t}\n\t\tif (!dirty) return;\n\n\t\tthis._set(newState, changed);\n\t}\n});\n\nexport { Store };\n","import { Store } from 'svelte/store';\nimport { waitForTheElement } from 'wait-for-the-element';\nimport Registry, { ComponentMap } from '../registry';\nimport { registerForEvents } from '../methods';\nimport { uniquestring } from '../util';\n\nexport default class Tour {\n  constructor(options = {}) {\n    this.options = Object.assign({}, {\n      name: uniquestring(),\n      showNext: true,\n      showPrev: true,\n      scenarios: [],\n    }, options);\n\n    this.name = this.options.name;\n    this.scenarios = this.options.scenarios;\n\n    this.store = new Store({});\n    this.elementMap = {};\n\n    if (!this.scenarios || this.scenarios.length === 0) throw new Error(`Tour ${this.name} was not given any scenarios`);\n\n    this.register();\n  }\n\n  register() {\n    Registry.registerTour(this);\n\n    for (const i in this.scenarios) {\n      if (!{}.hasOwnProperty.call(this.scenarios, i)) continue;\n\n      const scenario = this.scenarios[i];\n      if (!scenario.components) {\n        throw new Error(`Tour '${this.name}' scenario #${parseInt(i, 10) + 1} has no components property. Should be an array`);\n      }\n\n      for (const args of scenario.components) {\n        const comp = Registry.registerComponent({\n          component: args.component,\n          args,\n          name: args.name,\n        });\n\n        registerForEvents(args.events, comp);\n      }\n    }\n  }\n\n  start() {\n    // We are now the active tour\n    Registry.setActiveTour(this);\n\n    // Reset scenario in case //#endregionit was set\n    this.scenario = null;\n\n    this.next();\n  }\n\n  render(scenario) {\n    this.clear();\n\n    // Start the component render chain\n    this.renderChain(scenario.components[0], scenario);\n  }\n\n  nextComponent(compArgs, scenario) {\n    return scenario.components[scenario.components.indexOf(compArgs) + 1];\n  }\n\n  // NOTE: right now the chain of elements has to be in order; i.e. if component 2 attaches to component 1, component 1\n  //   has to come prior to two in the list of components.\n  renderChain(compArgs, scenario) {\n    let comp = compArgs.component;\n    const args = { ...compArgs };\n\n    if (typeof (comp) === 'string') {\n      comp = ComponentMap[comp];\n    }\n\n    if (!comp) throw new Error(`Component '${comp}' unrecognized`);\n\n    const nextButton = this.isLastScenario(scenario) ?\n      { text: 'End', handler: () => this.clear() } :\n      { text: 'Next', handler: () => this.next() };\n\n    // Clear out buttons 'cause we're overriding them\n    args.buttons = [];\n    if (this.options.showPrev && args.showPrev !== false && !this.isFirstScenario(scenario)) {\n      args.buttons = [{ text: 'Prev', handler: () => this.prev() }, ...(args.buttons || [])];\n    }\n    if (this.options.showNext && args.showNext !== false) {\n      args.buttons = [...(args.buttons || []), nextButton];\n    }\n    args.store = this.store;\n    args.name = args.name || uniquestring();\n\n    if (args.attach in this.elementMap) {\n      args.attach = this.elementMap[args.attach].refs.el;\n    }\n\n    const el = new comp(args);\n    Registry.registerInstance({ name: el.get().name, instance: el });\n\n    this.elementMap[el.get().name] = el;\n\n    const next = this.nextComponent(compArgs, scenario);\n    if (next) {\n      setTimeout(() => this.renderChain(next, scenario));\n    }\n  }\n\n  waitScenario(scenario) {\n    // Handle wait\n    let p = scenario.wait;\n    if (p) {\n      // Number\n      const ms = parseInt(p, 10);\n      if (isNaN(ms)) {\n        p = waitForTheElement(p, {\n          timeout: 10000,\n        });\n      } else {\n        p = new Promise(resolve => {\n          setTimeout(() => {\n            resolve();\n          }, ms);\n        });\n      }\n    }\n\n    Promise.resolve(p)\n      .then(() => {\n        this.scenario = scenario;\n        this.render(scenario);\n      });\n  }\n\n  next() {\n    const scenario = this.nextScenario(this.scenario);\n\n    if (!scenario) return;\n\n    this.scenario = scenario;\n\n    this.render(this.scenario);\n\n    const nextScenario = this.nextScenario(scenario);\n    if (nextScenario && nextScenario.wait) this.waitScenario(nextScenario);\n  }\n\n  prev() {\n    const scenario = this.prevScenario(this.scenario);\n\n    if (!scenario) return;\n\n    this.scenario = scenario;\n\n    this.render(this.scenario);\n\n    const prevScenario = this.prevScenario(scenario);\n    if (prevScenario && prevScenario.wait) this.waitScenario(prevScenario);\n  }\n\n  clear() {\n    // Remove all rendered elements\n    for (const el of Object.values(this.elementMap)) {\n      el.destroy();\n    }\n\n    this.elementMap = {};\n  }\n\n  isFirstScenario(scenario) {\n    return this.scenarios.indexOf(scenario) === 0;\n  }\n\n  isLastScenario(scenario) {\n    return this.scenarios.indexOf(scenario) === this.scenarios.length - 1;\n  }\n\n  nextScenario(scenario) {\n    if (scenario) {\n      const curIdx = this.scenarios.indexOf(scenario);\n\n      if (curIdx === -1) {\n        return;\n      }\n\n      return this.scenarios[curIdx + 1];\n    }\n\n    this.clear();\n    return this.scenarios[0];\n  }\n\n  prevScenario(scenario) {\n    if (scenario) {\n      const curIdx = this.scenarios.indexOf(scenario);\n\n      if (curIdx === -1) {\n        return;\n      }\n\n      return this.scenarios[curIdx - 1];\n    }\n\n    this.clear();\n    return this.scenarios[0];\n  }\n\n  stop() {\n    this.clear();\n  }\n}\n","import Registry from './registry';\nimport PubSub from './events';\nimport { default as Tour } from './components/tour';\nimport { default as CoachmarkComponent } from './components/Coachmark.svelte'; /* eslint-disable-line no-unused-vars */\nimport { default as HotspotComponent } from './components/Hotspot.svelte'; /* eslint-disable-line no-unused-vars */\nimport { default as ModalComponent } from './components/Modal.svelte'; /* eslint-disable-line no-unused-vars */\nimport { default as TooltipComponent } from './components/Tooltip.svelte'; /* eslint-disable-line no-unused-vars */\nimport { registerForEvents } from './methods';\n\nexport { version } from '../package.json';\nexport { Registry, Tour };\nexport { default as config } from './config';\nexport { Coachmark, Hotspot, Modal, Tooltip } from './components';\nexport { CoachmarkComponent, HotspotComponent, ModalComponent, TooltipComponent } from './components';\n\nconst { on, fire } = PubSub;\nconst { registerComponent, registerTour } = Registry;\nexport { on, fire, registerComponent, registerTour };\n\nexport function configure(config) {\n  (config.tours || []).forEach(t => Registry.registerTour(t));\n  // TODO: make sure each component exists\n  (config.components || []).forEach(c => {\n    const comp = Registry.registerComponent(c);\n    const args = comp.args || {};\n    registerForEvents(args.events, comp);\n  });\n}\n\nexport function start(tourName) {\n  const tourArgs = Registry.tour(tourName);\n  const tour = new Tour(tourArgs);\n  Registry.setActiveTour(tour);\n  tour.start();\n}\n\n// Functions\nexport function next() {\n  if (Registry.activeTour()) Registry.activeTour().next();\n}\n\nexport function prev() {\n  if (Registry.activeTour()) Registry.activeTour().prev();\n}\n\nexport function stop() {\n  if (Registry.activeTour()) Registry.activeTour().stop();\n}\n\nexport function reset() {\n  PubSub.reset();\n\n  Registry.clear();\n}\n"],"names":["this","global","now","const","raf","let","on","fire","waitForTheElement","oncreate","ondestroy","Config","Coachmark","CoachmarkComponent","Hotspot","HotspotComponent","Modal","ModalComponent","Tooltip","TooltipComponent","key","reset"],"mappings":"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"}